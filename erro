try:
    # Try getting the tuple (id, state)
    state_tuple = await checkpointer.aget_tuple(thread_id)

    if state_tuple:
        print("Previous state tuple found:", state_tuple)
        _, state_json = state_tuple

        # Parse the JSON string into a dict
        import json
        state_data = json.loads(state_json)
        print("Parsed state data:", state_data)
    else:
        print("No saved state for this thread_id.")
        state_data = None

except Exception as e:
    logger.error(f"Error retrieving previous state: {e}", exc_info=True)
    state_data = None
